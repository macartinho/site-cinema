<% layout('layouts/boilerplate') %>
    <div class="row">
        <h1 class="text-center">Editar Filme</h1>
        <div class="col-6 offset-3">
            <form action="/movies/<%= movie._id %>?_method=PUT" method="POST" novalidate class="validated-form" enctype="multipart/form-data">
                <div class="mb-3 col-5">
                    <label class="form-label" for="title">Nome</label>
                    <input class="form-control border border-dark" type="text" id="title" name="movie[title]" value="<%= movie.title %>"
                        required>
                </div>
                <div class="mb-3">
                    <label class="form-label" for="description">Descrição</label>
                    <textarea class="form-control border border-dark" type="text" id="description" name="movie[description]"
                        required><%= movie.description %></textarea>
                </div>
                <div class="mb-3 col-3">
                    <label class="form-label" for="date">Data de lançamento</label>
                    <% let datetime=movie.releaseDate.toISOString() %>
                        <% let date=datetime.split('T')[0];%>
                            <input class="form-control border border-dark" type="date" id="date" name="movie[releaseDate]"
                                value="<%=date%>" required>
                </div>
                <div class="mb-3">
                    <label class="form-label" for="genre">Gênero </label>
                    <input class="form-control border border-dark" type="text" id="genre" name="movie[genre]" value="<%= movie.genre %>"
                        required>
                </div>
                <div class="mb-3">
                    <label class="form-label" for="image">Imagens</label>
                    <input class="form-control border border-dark" type="file" name="image" id="image" multiple>
                </div>
                <!--<div class="mb-3">
                    <label class="form-label" for="img">Url da imagem</label>
                    <input class="form-control border border-dark" type="text" id="img" name="movie[img]" value="<%= movie.img %>" required>
                </div>-->
                <div class="mb-3 col-5">
                    <label class="form-label" for="runtime">Duração</label>
                    <div class="input-group mb-3">
                        <input class="form-control border border-dark" type="number" id="runtime" name="movie[runtime]"
                            value="<%= movie.runtime %>" min="1" max="900" required>
                        <span class="input-group-text" id="basic-addon2" aria-describedby="runtime">minutos</span>
                    </div>
                </div>
                <div class="mb-3">
                    <label class="form-label" for="director">Direção</label>
                    <input class="form-control border border-dark" type="text" id="director" name="movie[director]"
                        value="<%= movie.director %>" required>
                </div>
                <div class="mb-3">
                    <label class="form-label" for="writer">Roteiristas</label>
                    <input class="form-control border border-dark" type="text" id="writer" name="movie[writer]" value="<%= movie.writer %>"
                        required>
                </div>
                <div class="mb-3">
                    <label class="form-label" for="actors">Artistas</label>
                    <input class="form-control border border-dark" type="text" id="actors" name="movie[actors]"
                        value="<%= movie.actors %>" required>
                </div>
                <div class="mb-3 row">
                    <% movie.images.forEach(function(img, i) { %>
                        <div class="col-6">
                        <img src="<%= img.thumbnail %>" alt="" class="img-thumbnail">
                        <div class="form-check">
                            <input type="checkbox" id="image-<%= i %>" name="deleteImages[]" value="<%= img.filename %>">
                            <label for="image-<%= i %>">Deletar Imagem</label>
                        </div>
                    </div>
                        
                        <% }) %>
                </div>
                <div class="mb-3">
                    <button class="btn btn-success mr-3">Atualizar filme</button>
                    <div class="d-inline mx-3"><a href="/movies/<%= movie._id %>">Voltar</a></div>
                </div>
            </form>
        </div>
    </div>
