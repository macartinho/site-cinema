<% layout('layouts/boilerplate') %>
    <div class="row">
        <div class="col-6 offset-3">
            <div id="movieCarousel" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-inner">
                    <% movie.images.forEach((img, i) => {  %>
                    <div class="carousel-item <%= i === 0 ? 'active' : ''%>">
                        <img crossorigin="anonymous" src="<%= img.url%>" class="d-block w-100"alt="">
                    </div>
                    <% }) %>
    
                </div>
                <% if(movie.images.length > 1) {%>
                <a class="carousel-control-prev" href="#movieCarousel" role="button" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#movieCarousel" role="button" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
                <% } %>
            </div>
            <div class="card mb-3">
                    <div class="card-body">
                        <h5 class="card-title">
                            <%= movie.title %>
                        </h5>
                        <p class="card-text">
                            <%= movie.description %>
                        </p>
                        <p class="text-muted">
                            <%= movie.genre %>
                        </p>
                    </div>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item">
                            <strong>Duração: </strong>
                            <%= movie.runtime %> min
                        </li>
                        <% let datetime=movie.releaseDate.toISOString() %>
                            <% let date=datetime.split('T')[0];%>
                                <li class="list-group-item">
                                    <strong>Data de lançamento: </strong>
                                    <%= date %>
                                </li>
                                <li class="list-group-item">
                                    <strong>Direção: </strong>
                                    <%= movie.director %>
                                </li>
                                <li class="list-group-item">
                                    <strong>Roteiristas: </strong>
                                    <%= movie.writer %>
                                </li>
                                <li class="list-group-item">
                                    <strong>Artistas: </strong>
                                    <%= movie.actors %>
                                </li>
                    </ul>
                    <div class="card-body">
                        <a href="/movies/<%= movie._id %>/edit" class="card-link btn btn-primary">Editar
                            Filme</a>
                        <form action="/movies/<%= movie._id %>?_method=DELETE" class="d-inline" method="POST">
                            <button class="btn btn-danger">Deletar Filme</button>
                        </form>
                    </div>
            </div>
        </div>
    </div>